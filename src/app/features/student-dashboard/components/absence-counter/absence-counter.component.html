<div class="bg-white rounded-[2rem] shadow-xl border border-gray-100 p-8 overflow-hidden relative">
    <div class="absolute top-0 right-0 w-32 h-32 bg-gray-50 rounded-full -mr-16 -mt-16 opacity-50"></div>

    <div class="flex items-center justify-between mb-8 relative z-10">
        <h3 class="text-xl font-black text-gray-900 uppercase tracking-tighter">Estado de Ausencias</h3>
        <span class="px-4 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-sm" [ngClass]="{
            'bg-emerald-100 text-emerald-700': counter?.status === 'safe',
            'bg-amber-100 text-amber-700': counter?.status === 'warning',
            'bg-rose-100 text-rose-700': counter?.status === 'danger',
            'bg-slate-100 text-slate-700': counter?.status === 'suspended'
          }">
            {{ getStatusBadge() }}
        </span>
    </div>

    <div *ngIf="loading" class="flex items-center justify-center py-8">
        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div>
    </div>

    <div *ngIf="!loading && counter">
        <!-- Strike Counter -->
        <div class="mb-10 text-center">
            <div
                class="inline-block px-6 py-2 bg-gray-50 rounded-2xl border border-gray-100 mb-6 font-black uppercase tracking-[0.2em] text-[10px] text-gray-400">
                Registro de Infracciones
            </div>

            <div class="flex items-center justify-center space-x-6 mb-8">
                <div *ngFor="let i of [1, 2, 3]"
                    class="w-16 h-16 rounded-[1.5rem] border-4 flex flex-col items-center justify-center transition-all duration-500 shadow-lg"
                    [ngClass]="{
                 'border-rose-500 bg-rose-50 scale-110 shadow-rose-100': i <= counter.strikeCount,
                 'border-gray-50 bg-white opacity-40': i > counter.strikeCount
               }">
                    <svg *ngIf="i <= counter.strikeCount" class="w-8 h-8 text-rose-600" fill="currentColor"
                        viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                            clip-rule="evenodd" />
                    </svg>
                    <span *ngIf="i > counter.strikeCount" class="text-2xl font-black text-gray-200">{{ i }}</span>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="w-full bg-gray-100 rounded-full h-3 overflow-hidden p-0.5 shadow-inner">
                <div class="h-full rounded-full transition-all duration-1000" [ngClass]="{
               'bg-emerald-500': counter.strikeCount === 0,
               'bg-amber-500': counter.strikeCount === 1,
               'bg-rose-500': counter.strikeCount >= 2
             }" [style.width.%]="(counter.strikeCount / counter.maxStrikes) * 100">
                </div>
            </div>
        </div>

        <!-- Message -->
        <div class="rounded-lg p-4 mb-4" [ngClass]="{
           'bg-success-50 border border-success-200': counter.status === 'safe',
           'bg-warning-50 border border-warning-200': counter.status === 'warning',
           'bg-danger-50 border border-danger-200': counter.status === 'danger' || counter.status === 'suspended'
         }">
            <div class="flex items-start space-x-3">
                <svg class="w-5 h-5 flex-shrink-0 mt-0.5" [ngClass]="{
               'text-success-600': counter.status === 'safe',
               'text-warning-600': counter.status === 'warning',
               'text-danger-600': counter.status === 'danger' || counter.status === 'suspended'
             }" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                        clip-rule="evenodd" />
                </svg>
                <p class="text-sm" [ngClass]="{
             'text-success-800': counter.status === 'safe',
             'text-warning-800': counter.status === 'warning',
             'text-danger-800': counter.status === 'danger' || counter.status === 'suspended'
           }">
                    {{ counter.message }}
                </p>
            </div>
        </div>

        <!-- Penalty Info -->
        <div class="bg-gray-50 rounded-lg p-4 text-sm text-gray-600">
            <p class="font-semibold text-gray-900 mb-2">Sistema de Penalidades</p>
            <ul class="space-y-1 text-xs">
                <li class="flex items-start">
                    <span class="text-warning-600 mr-2">•</span>
                    <span>1ra ausencia: Advertencia</span>
                </li>
                <li class="flex items-start">
                    <span class="text-warning-600 mr-2">•</span>
                    <span>2da ausencia: Advertencia severa</span>
                </li>
                <li class="flex items-start">
                    <span class="text-danger-600 mr-2">•</span>
                    <span>3ra ausencia: Suspensión de 1 semana</span>
                </li>
            </ul>
        </div>
    </div>

    <div *ngIf="!loading && !counter" class="text-center py-8 text-gray-500">
        <p>No se pudo cargar la información</p>
    </div>
</div>